{"version":3,"sources":["webpack://kekstagram/./source/js/scale-control.js","webpack://kekstagram/./source/js/effect-control.js","webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/render-big-picture.js","webpack://kekstagram/./source/js/render.js","webpack://kekstagram/./source/js/filter.js","webpack://kekstagram/./source/js/upload-message.js","webpack://kekstagram/./source/js/validation.js","webpack://kekstagram/./source/js/modal.js","webpack://kekstagram/./source/js/api.js"],"names":["scaleField","document","querySelector","imgWrap","scaleSmaller","scaleBigger","img","scale","getImgScaleStyle","value","parseInt","unsetScaleControl","MAX_SCALE_VALUE","style","transform","CHROME","SEPIA","MARVIN","PHOBOS","HEAT","effectsWrap","chrome","sepia","marvin","phobos","heat","none","sliderField","sliderLevel","sliderElement","checkSliderExists","noUiSlider","destroy","unsetEffectControl","className","filter","setAttribute","isEscape","evt","key","displayCommentsCount","body","smallPicturesContainer","bigPictureContainer","commentCounter","commentsLoader","closeButton","commentContainer","commentTemplate","content","commentsFragment","createDocumentFragment","renderComments","obj","comments","slice","forEach","avatar","message","name","newComment","cloneNode","src","alt","textContent","appendChild","length","innerHTML","children","showCommentsCounter","picturesContainer","pictureTemplate","pictureMiniaturesFragment","clearPictures","querySelectorAll","el","removeChild","renderPictures","data","url","likes","pictureMiniature","smallPictures","i","onCloseButtonClick","classList","add","remove","removeEventListener","onCommentsLoaderClick","onBodyEscKeydown","closeBigPicture","addComments","showCommentsLoader","addEventListener","description","renderBigPicture","filterContainer","filterDefault","filterRandom","filterDiscussed","main","successMessage","successMessageCloseButton","errorMessage","errorMessageCloseButton","closeSuccessModal","onSuccessDocumentClick","onSuccessDocumentEscKeydown","closeErrorModal","onErrorDocumentClick","onErrorDocumentEscKeydown","target","onSuccessMessageCloseButtonClick","onErrorMessageCloseButtonClick","HASHTAG_PATTERN","WARNINGS","WARNING_COLOR","hashtag","onDescriptionInvalid","validity","tooLong","setCustomValidity","border","color","borderColor","reportValidity","onHastagInput","errors","hashtags","trim","toLowerCase","split","test","push","j","includes","join","onEscKeydown","stopPropagation","unsetValidationForm","FILE_TYPES","uploadForm","uploadInput","uploadOverlay","uploadCancel","effectPreviews","closeModal","reset","onUploadFormSubmit","onDocumentKeydown","preventDefault","onSuccess","onFail","fetch","method","then","catch","sendData","FormData","onUploadCancelClick","file","files","fileName","some","it","endsWith","reader","FileReader","result","preview","backgroundImage","readAsDataURL","insertPhoto","MIN_SCALE_VALUE","create","range","min","max","start","step","connect","removeAttribute","on","values","response","json","_","debounce","contains","sort","Math","random","a","b","getFilterPictures","setFilter","alertContainer","createElement","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","append","setTimeout","showAlert"],"mappings":"mBAAA,MAIMA,EAAaC,SAASC,cAAc,sBACpCC,EAAUF,SAASC,cAAc,wBACjCE,EAAeJ,EAAWE,cAAc,4BACxCG,EAAcL,EAAWE,cAAc,2BACvCI,EAAMH,EAAQD,cAAc,OAC5BK,EAAQP,EAAWE,cAAc,0BAEjCM,EAAoBC,GACjB,SAASC,SAASD,GAAS,IAG9BE,EAAoB,KACxBJ,EAAME,MAAQG,OACdN,EAAIO,MAAMC,UAAYN,EAAiBD,EAAME,QCdzCM,EAEG,EAFHA,EAGG,EAOHC,EAEG,EAFHA,EAGG,EAOHC,EAEG,EAFHA,EAGG,IAOHC,EAEG,EAFHA,EAGG,EAOHC,EAEG,EAFHA,EAGG,EAOHC,EAAcnB,SAASC,cAAc,wBACrCmB,EAASD,EAAYlB,cAAc,yBACnCoB,EAAQF,EAAYlB,cAAc,wBAClCqB,EAASH,EAAYlB,cAAc,yBACnCsB,EAASJ,EAAYlB,cAAc,yBACnCuB,EAAOL,EAAYlB,cAAc,uBACjCwB,EAAON,EAAYlB,cAAc,uBAEjCyB,EAAc1B,SAASC,cAAc,6BACrC0B,EAAcD,EAAYzB,cAAc,wBACxC2B,EAAgBF,EAAYzB,cAAc,yBAE1C4B,EAAoB,KACpBD,EAAcE,YAChBF,EAAcE,WAAWC,WAIvBC,EAAqB,KACzB3B,EAAI4B,UAAY,GAChB5B,EAAIO,MAAMsB,OAAS,OACnBP,EAAYQ,aAAa,QAAS,IAClCP,EAAcO,aAAa,YAAY,ICrDnCC,EAAYC,GACG,WAAZA,EAAIC,ICnBb,IAAIC,EAFuB,EAI3B,MAAMC,EAAOxC,SAASwC,KAChBC,EAAyBzC,SAASC,cAAc,aAChDyC,EAAsB1C,SAASC,cAAc,gBAC7C0C,EAAiBD,EAAoBzC,cAAc,0BACnD2C,EAAiBF,EAAoBzC,cAAc,oBACnD4C,EAAcH,EAAoBzC,cAAc,wBAChD6C,EAAmBJ,EAAoBzC,cAAc,qBACrD8C,EAAkB/C,SAASC,cAAc,YAC5C+C,QACA/C,cAAc,oBAEXgD,EAAmBjD,SAASkD,yBAe5BC,EAAkBC,IACtBA,EAAIC,SACDC,MAAM,EAAGf,GACTgB,SAAQ,EAAGC,SAAQC,UAASC,WAC3B,MAAMC,EAAaZ,EAAgBa,WAAU,GAC7CD,EAAW1D,cAAc,oBAAoB4D,IAAML,EACnDG,EAAW1D,cAAc,oBAAoB6D,IAAMJ,EACnDC,EAAW1D,cAAc,iBAAiB8D,YAAcN,EACxDR,EAAiBe,YAAYL,MAEjCb,EAAiBkB,YAAYf,GAhBH,CAACG,IACvBA,EAAIC,SAASY,OAAS,IACxBtB,EAAeuB,UAAY,GAAGpB,EAAiBqB,SAASF,0CAA0Cb,EAAIC,SAASY,+BAgBjHG,CAAoBhB,IC1ChBiB,EAAoBrE,SAASC,cAAc,aAE3CqE,EAAkBtE,SAASC,cAAc,YAC5C+C,QACA/C,cAAc,YACXsE,EAA4BvE,SAASkD,yBAErCsB,EAAgB,KACHH,EAAkBI,iBAAiB,YAC3ClB,SAASmB,IAChBL,EAAkBM,YAAYD,OAI5BE,EAAkBC,IACtBA,EAAKtB,SAAQ,EAAGuB,MAAKC,QAAO1B,eAC1B,MAAM2B,EAAmBV,EAAgBV,WAAU,GACnDoB,EAAiB/E,cAAc,iBAAiB4D,IAAMiB,EACtDE,EAAiB/E,cAAc,mBAAmB8D,YAAcgB,EAChEC,EAAiB/E,cAAc,sBAAsB8D,YAAcV,EAASY,OAC5EM,EAA0BP,YAAYgB,MAExCX,EAAkBL,YAAYO,GDwBP,CAACM,IACxB,MAAMI,EAAgBxC,EAAuBgC,iBAAiB,KAE9D,IAAK,IAAIS,EAAI,EAAGA,EAAID,EAAchB,OAAQiB,IAAK,CAE7C,MAAMC,EAAqB,KACzBzC,EAAoB0C,UAAUC,IAAI,UAClC7C,EAAK4C,UAAUE,OAAO,cACtBxC,EAAiBiB,YAAc,GAC/BxB,EAvDqB,EAwDrBK,EAAe2C,oBAAoB,QAASC,GAC5CxF,SAASuF,oBAAoB,UAAWE,IAGpCC,EAAkBP,EAElBM,EAAoBpD,IACpBD,EAASC,IACXqD,KAIEC,EAAevC,IAlDEV,EAAoB+B,iBAAiB,oBAC7ClB,SAASmB,IACxB5B,EAAiB6B,YAAYD,MAkD3BnC,GAtEqB,EAuErBY,EAAeC,GACfwC,EAAmBxC,IAGfoC,EAAwB,IAAMG,EAAYd,EAAKK,IAE/CU,EAAsBxC,IACtBb,EAAuBa,EAAIC,SAASY,QACtCrB,EAAewC,UAAUC,IAAI,UAC7BzC,EAAe2C,oBAAoB,QAASC,KAE5C5C,EAAewC,UAAUE,OAAO,UAChC1C,EAAeiD,iBAAiB,QAASL,KAI7CP,EAAcC,GAAGW,iBAAiB,SAAS,KACzCnD,EAAoB0C,UAAUE,OAAO,UAErC5C,EAAoBzC,cAAc,yBAAyB4D,IAAMgB,EAAKK,GAAGJ,IACzEpC,EAAoBzC,cAAc,yBAAyB6D,IAAMe,EAAKK,GAAGY,YACzEpD,EAAoBzC,cAAc,gBAAgB8D,YAAcc,EAAKK,GAAGH,MACxErC,EAAoBzC,cAAc,mBAAmB8D,YAAcc,EAAKK,GAAG7B,SAASY,OACpFvB,EAAoBzC,cAAc,oBAAoB8D,YAAcc,EAAKK,GAAGY,YAE5E3C,EAAe0B,EAAKK,IACpBU,EAAmBf,EAAKK,IAExB1C,EAAK4C,UAAUC,IAAI,cACnBxC,EAAYgD,iBAAiB,QAASV,GACtCnF,SAAS6F,iBAAiB,UAAWJ,QC7EzCM,CAAiBlB,ICpBbmB,EAAkBhG,SAASC,cAAc,gBACzCgG,EAAgBD,EAAgB/F,cAAc,mBAC9CiG,EAAeF,EAAgB/F,cAAc,kBAC7CkG,EAAkBH,EAAgB/F,cAAc,qBCPhDmG,EAAOpG,SAASC,cAAc,QAE9BoG,EAAiBrG,SAASC,cAAc,YAC3C+C,QACA/C,cAAc,YACd2D,WAAU,GACP0C,GAA4BD,EAAepG,cAAc,oBAEzDsG,GAAevG,SAASC,cAAc,UACzC+C,QACA/C,cAAc,UACd2D,WAAU,GACP4C,GAA0BD,GAAatG,cAAc,kBAErDwG,GAAoB,KACxBL,EAAKzB,YAAY0B,GACjBrG,SAASuF,oBAAoB,QAASmB,IACtC1G,SAASuF,oBAAoB,UAAWoB,KAGpCC,GAAkB,KACtBR,EAAKzB,YAAY4B,IACjBvG,SAASuF,oBAAoB,QAASsB,IACtC7G,SAASuF,oBAAoB,UAAWuB,KAGpCH,GAA+BtE,IAC/BD,EAASC,IACXoE,MAGEK,GAA6BzE,IAC7BD,EAASC,IACXuE,MAGEF,GAA0BrE,IACD,YAAzBA,EAAI0E,OAAO9E,WACbwE,MAIEI,GAAwBxE,IACC,UAAzBA,EAAI0E,OAAO9E,WACb2E,MAIEI,GAAmCP,GASnCQ,GAAiCL,GCzDjCM,GAAkB,oBAClBC,GACG,kCAKHC,GAAgB,UAEhBtB,GAAc9F,SAASC,cAAc,sBACrCoH,GAAUrH,SAASC,cAAc,mBAEjCqH,GAAuB,KACvBxB,GAAYyB,SAASC,SACvB1B,GAAY2B,kBAAkB,iDAC9B3B,GAAYlF,MAAM8G,OAASN,oBAC3BtB,GAAYlF,MAAM+G,MAAQP,KAE1BtB,GAAY2B,kBAAkB,IAC9B3B,GAAYlF,MAAMgH,YAAc,GAChC9B,GAAYlF,MAAM+G,MAAQ,IAG5B7B,GAAY+B,kBAGRC,GAAgB,KACpB,MAAMC,EAAS,GACTC,EAAWX,GAAQ7G,MAAMyH,OAAOC,cAAcC,MAAM,KAE1DH,EAASzE,SAAQ,CAACmB,EAAIQ,KACfgC,GAAgBkB,KAAK1D,IAAc,KAAPA,GAAoB,MAAPA,GAC5CqD,EAAOM,KA3BF,sBA6BH3D,EAAGT,OAnCgB,IAoCrB8D,EAAOM,KA/BJ,+CAkCL,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAS/D,OAAQqE,IAC/BN,EAAS9C,KAAO8C,EAASM,IAAMpD,IAAMoD,IAClCP,EAAOQ,SAASpB,KACnBY,EAAOM,KAAKlB,QAMhBa,EAAS/D,OAjDY,GAkDvB8D,EAAOM,KA7CF,wCAgDPhB,GAAQI,kBAAkBM,EAAOS,KAAK,OACtCnB,GAAQQ,iBAEJE,EAAO9D,QACToD,GAAQzG,MAAM8G,OAASN,oBACvBC,GAAQzG,MAAM+G,MAAQP,KAEtBC,GAAQzG,MAAMgH,YAAc,GAC5BP,GAAQzG,MAAM+G,MAAQ,KAIpBc,GAAgBpG,IACpBA,EAAIqG,mBAWAC,GAAsB,KAC1B7C,GAAYP,oBAAoB,UAAW+B,IAC3CD,GAAQ9B,oBAAoB,QAASuC,IAErCT,GAAQ9B,oBAAoB,UAAWkD,IACvC3C,GAAYP,oBAAoB,UAAWkD,KC3EvCG,GAAa,CAAC,MAAO,MAAO,OAAQ,OAEpCC,GAAa7I,SAASC,cAAc,qBACpC6I,GAAcD,GAAW5I,cAAc,sBACvC8I,GAAgBF,GAAW5I,cAAc,wBACzC+I,GAAeD,GAAc9I,cAAc,uBAC3C,GAAOD,SAASC,cAAc,QAC9BgJ,GAAiBJ,GAAWpE,iBAAiB,qBAuB7CyE,GAAa,KACjBH,GAAc3D,UAAUC,IAAI,UAC5B,GAAKD,UAAUE,OAAO,eACtBuD,GAAWM,QACXN,GAAWtD,oBAAoB,SAAU6D,IACzCpJ,SAASuF,oBAAoB,UAAW8D,KAGpCD,GAAsB/G,IAC1BA,EAAIiH,iBC1BW,EAACC,EAAWC,EAAQhH,KACnCiH,MAhBqB,iDAkBnB,CACEC,OAAQ,OACRlH,SAGDmH,MAAK,KHyBRvD,EAAKpC,YAAYqC,GACjBC,GAA0BT,iBAAiB,QAASmB,IACpDhH,SAAS6F,iBAAiB,UAAWc,IACrC3G,SAAS6F,iBAAiB,QAASa,OGzBhCkD,OAAM,KH+BTxD,EAAKpC,YAAYuC,IACjBC,GAAwBX,iBAAiB,QAASoB,IAClDjH,SAAS6F,iBAAiB,UAAWiB,IACrC9G,SAAS6F,iBAAiB,QAASgB,QEjBnCgD,CACE,EACA,EACA,IAAIC,SAASzH,EAAI0E,SAEnBmC,KACAxI,IACAsB,KAGIqH,GAAqBhH,IACrBD,EAASC,KACX6G,KACAxI,IACAsB,IACA2G,OAIEoB,GAAsB,KAC1Bb,KACAxI,IACAsB,IACA2G,MAGFG,GAAYjD,iBAAiB,UAAU,KA1DnB,MAClB,MAAMmE,EAAOlB,GAAYmB,MAAM,GACzBC,EAAWF,EAAKtG,KAAKwE,cAM3B,GAJgBU,GAAWuB,MAAMC,GACxBF,EAASG,SAASD,KAGd,CACX,MAAME,EAAS,IAAIC,WAEnBD,EAAOzE,iBAAiB,QAAQ,KAC9BxF,EAAIwD,IAAMyG,EAAOE,OACjBvB,GAAe1F,SAASkH,IACtBA,EAAQ7J,MAAM8J,gBAAkB,OAAOJ,EAAOE,gBAGlDF,EAAOK,cAAcX,KA0CvBY,GACA/B,GAAWhD,iBAAiB,SAAUuD,IACtCL,GAAc3D,UAAUE,OAAO,UAC/B,GAAKF,UAAUC,IAAI,cACnB2D,GAAanD,iBAAiB,QAASkE,IACvC/J,SAAS6F,iBAAiB,UAAWwD,IR3DrClJ,EAAa0F,iBAAiB,SAAS,KACrCvF,EAAME,MAAQC,SAASH,EAAME,OApBd,GAoBoC,IAE/CC,SAASH,EAAME,OAvBC,KAwBlBF,EAAME,MAAQqK,OAEhBxK,EAAIO,MAAMC,UAAYN,EAAiBD,EAAME,UAG/CJ,EAAYyF,iBAAiB,SAAS,KACpCvF,EAAME,MAAQC,SAASH,EAAME,OA7Bd,GA6BoC,IAE/CC,SAASH,EAAME,OAjCC,MAkClBF,EAAME,MAAQG,QAEhBN,EAAIO,MAAMC,UAAYN,EAAiBD,EAAME,UC2C/CY,EAAOyE,iBAAiB,SAAS,KAC/BhE,IACAxB,EAAI4B,UAAY,2BAEhBH,WAAWgJ,OAAOlJ,EAAe,CAC/BmJ,MAAO,CACLC,IAAKlK,EACLmK,IAAKnK,GAEPoK,MAhFG,EAiFHC,KAhFE,GAiFFC,QAhFK,UAkFPxJ,EAAcyJ,gBAAgB,YAE9BzJ,EAAcE,WAAWwJ,GAAG,UAAWC,IACrC5J,EAAYQ,aAAa,QAASoJ,EAAO,IACzClL,EAAIO,MAAMsB,OAAS,aAAaP,EAAYnB,eAIhDa,EAAMwE,iBAAiB,SAAS,KAC9BhE,IACAxB,EAAI4B,UAAY,0BAEhBH,WAAWgJ,OAAOlJ,EAAe,CAC/BmJ,MAAO,CACLC,IAAKjK,EACLkK,IAAKlK,GAEPmK,MA3FG,EA4FHC,KA3FE,GA4FFC,QA3FK,UA6FPxJ,EAAcyJ,gBAAgB,YAE9BzJ,EAAcE,WAAWwJ,GAAG,UAAWC,IACrC5J,EAAYQ,aAAa,QAASoJ,EAAO,IACzClL,EAAIO,MAAMsB,OAAS,SAASP,EAAYnB,eAK5Cc,EAAOuE,iBAAiB,SAAS,KAC/BhE,IACAxB,EAAI4B,UAAY,2BAEhBH,WAAWgJ,OAAOlJ,EAAe,CAC/BmJ,MAAO,CACLC,IAAKhK,EACLiK,IAAKjK,GAEPkK,MAvGG,IAwGHC,KAvGE,GAwGFC,QAvGK,UAyGPxJ,EAAcyJ,gBAAgB,YAE9BzJ,EAAcE,WAAWwJ,GAAG,UAAWC,IACrC5J,EAAYQ,aAAa,QAASoJ,EAAO,IACzClL,EAAIO,MAAMsB,OAAS,UAAUP,EAAYnB,gBAI7Ce,EAAOsE,iBAAiB,SAAS,KAC/BhE,IACAxB,EAAI4B,UAAY,2BAEhBH,WAAWgJ,OAAOlJ,EAAe,CAC/BmJ,MAAO,CACLC,IAAK/J,EACLgK,IAAKhK,GAEPiK,MAlHG,EAmHHC,KAlHE,GAmHFC,QAlHK,UAoHPxJ,EAAcyJ,gBAAgB,YAE9BzJ,EAAcE,WAAWwJ,GAAG,UAAWC,IACrC5J,EAAYQ,aAAa,QAASoJ,EAAO,IACzClL,EAAIO,MAAMsB,OAAS,QAAQP,EAAYnB,iBAI3CgB,EAAKqE,iBAAiB,SAAS,KAC7BhE,IACAxB,EAAI4B,UAAY,yBAEhBH,WAAWgJ,OAAOlJ,EAAe,CAC/BmJ,MAAO,CACLC,IAAK9J,EACL+J,IAAK/J,GAEPgK,MA7HG,EA8HHC,KA7HE,GA8HFC,QA7HK,UA+HPxJ,EAAcyJ,gBAAgB,YAE9BzJ,EAAcE,WAAWwJ,GAAG,UAAWC,IACrC5J,EAAYQ,aAAa,QAASoJ,EAAO,IACzClL,EAAIO,MAAMsB,OAAS,cAAcP,EAAYnB,eAIjDiB,EAAKoE,iBAAiB,SAAS,KAC7B7D,OMpHF8D,GAAYD,iBAAiB,UAAWyB,IACxCD,GAAQxB,iBAAiB,QAASiC,IAElCT,GAAQxB,iBAAiB,UAAW4C,IACpC3C,GAAYD,iBAAiB,UAAW4C,OElEjCgB,MAJa,uDAKjBE,MAAM6B,GAAaA,EAASC,SAC5B9B,MAAM9E,IACLD,EAAeC,GJCnBmB,EAAgBZ,UAAUE,OAAO,yBAEjCW,EAAcJ,iBAAiB,SAAS,KACtCI,EAAcb,UAAUC,IAAI,+BAC5Ba,EAAad,UAAUE,OAAO,+BAC9Ba,EAAgBf,UAAUE,OAAO,kCAGnCY,EAAaL,iBAAiB,SAAS,KAErCK,EAAad,UAAUC,IAAI,+BAC3BY,EAAcb,UAAUE,OAAO,+BAC/Ba,EAAgBf,UAAUE,OAAO,kCAGnCa,EAAgBN,iBAAiB,SAAS,KACxCM,EAAgBf,UAAUC,IAAI,+BAC9BY,EAAcb,UAAUE,OAAO,+BAC/BY,EAAad,UAAUE,OAAO,kCAqBhB,CAACT,IACjBmB,EAAgBH,iBAAiB,QAAS6F,EAAEC,UAAS,IAjB7B,CAAC9G,IACrBqB,EAAad,UAAUwG,SAAS,gCAClCpH,IACAI,EAAeC,EACZvB,QACAuI,MAAK,IAAM,GAAMC,KAAKC,WACtBzI,MAAM,EAtCc,MAuCd6C,EAAgBf,UAAUwG,SAAS,gCAC5CpH,IACAI,EAAeC,EAAKvB,QAAQuI,MAAK,CAACG,EAAGC,IAAMA,EAAE5I,SAASY,OAAS+H,EAAE3I,SAASY,YAE1EO,IACAI,EAAeC,KAK0CqH,CAAkBrH,IAhD1D,OISfsH,CAAUtH,MAEX+E,OAAM,KPbO,CAACnG,IACjB,MAAM2I,EAAiBpM,SAASqM,cAAc,OAC9CD,EAAexL,MAAM0L,OAAS,IAC9BF,EAAexL,MAAM2L,SAAW,WAChCH,EAAexL,MAAM4L,KAAO,EAC5BJ,EAAexL,MAAM6L,IAAM,EAC3BL,EAAexL,MAAM8L,MAAQ,EAC7BN,EAAexL,MAAM+L,QAAU,WAC/BP,EAAexL,MAAMgM,SAAW,OAChCR,EAAexL,MAAMiM,UAAY,SACjCT,EAAexL,MAAMkM,gBAAkB,MAEvCV,EAAerI,YOED,8BPDd/D,SAASwC,KAAKuK,OAAOX,GAErBY,YAAW,KACTZ,EAAe9G,WAlBK,MOgBlB2H,O","file":"main.bundle.js","sourcesContent":["const MAX_SCALE_VALUE = 100;\nconst MIN_SCALE_VALUE = 25;\nconst SCALE_STEP = 25;\n\nconst scaleField = document.querySelector('.img-upload__scale');\nconst imgWrap = document.querySelector('.img-upload__preview');\nconst scaleSmaller = scaleField.querySelector('.scale__control--smaller');\nconst scaleBigger = scaleField.querySelector('.scale__control--bigger');\nconst img = imgWrap.querySelector('img');\nconst scale = scaleField.querySelector('.scale__control--value');\n\nconst getImgScaleStyle = (value) => {\n  return `scale(${parseInt(value) / 100}`;\n}\n\nconst unsetScaleControl = () => {\n  scale.value = MAX_SCALE_VALUE + '%';\n  img.style.transform = getImgScaleStyle(scale.value);\n}\n\nconst setScaleControl = () => {\n  scaleSmaller.addEventListener('click', () => {\n    scale.value = parseInt(scale.value) - SCALE_STEP + '%';\n\n    if (parseInt(scale.value) < MIN_SCALE_VALUE) {\n      scale.value = MIN_SCALE_VALUE + '%';\n    }\n    img.style.transform = getImgScaleStyle(scale.value);\n  });\n\n  scaleBigger.addEventListener('click', () => {\n    scale.value = parseInt(scale.value) + SCALE_STEP + '%';\n\n    if (parseInt(scale.value) > MAX_SCALE_VALUE) {\n      scale.value = MAX_SCALE_VALUE + '%';\n    }\n    img.style.transform = getImgScaleStyle(scale.value);\n  });\n}\n\nexport { img, setScaleControl, unsetScaleControl };\n","/* global noUiSlider:readonly */\nimport { img } from './scale-control.js';\n\nconst CHROME = {\n  RANGE: {\n    MIN: 0,\n    MAX: 1,\n  },\n  START: 1,\n  STEP: 0.1,\n  CONNECT: 'lower',\n}\n\nconst SEPIA = {\n  RANGE: {\n    MIN: 0,\n    MAX: 1,\n  },\n  START: 1,\n  STEP: 0.1,\n  CONNECT: 'lower',\n}\n\nconst MARVIN = {\n  RANGE: {\n    MIN: 0,\n    MAX: 100,\n  },\n  START: 100,\n  STEP: 0.1,\n  CONNECT: 'lower',\n}\n\nconst PHOBOS = {\n  RANGE: {\n    MIN: 0,\n    MAX: 3,\n  },\n  START: 3,\n  STEP: 0.1,\n  CONNECT: 'lower',\n}\n\nconst HEAT = {\n  RANGE: {\n    MIN: 1,\n    MAX: 3,\n  },\n  START: 3,\n  STEP: 0.1,\n  CONNECT: 'lower',\n}\n\nconst effectsWrap = document.querySelector('.img-upload__effects');\nconst chrome = effectsWrap.querySelector('[for=\"effect-chrome\"]');\nconst sepia = effectsWrap.querySelector('[for=\"effect-sepia\"]');\nconst marvin = effectsWrap.querySelector('[for=\"effect-marvin\"]');\nconst phobos = effectsWrap.querySelector('[for=\"effect-phobos\"]');\nconst heat = effectsWrap.querySelector('[for=\"effect-heat\"]');\nconst none = effectsWrap.querySelector('[for=\"effect-none\"]');\n\nconst sliderField = document.querySelector('.img-upload__effect-level');\nconst sliderLevel = sliderField.querySelector('.effect-level__value');\nconst sliderElement = sliderField.querySelector('.effect-level__slider');\n\nconst checkSliderExists = () => {\n  if (sliderElement.noUiSlider) {\n    sliderElement.noUiSlider.destroy()\n  }\n};\n\nconst unsetEffectControl = () => {\n  img.className = '';\n  img.style.filter = 'none';\n  sliderLevel.setAttribute('value', '');\n  sliderElement.setAttribute('disabled', true);\n}\n\nconst setEffectContol = () => {\n  chrome.addEventListener('click', () => {\n    checkSliderExists();\n    img.className = 'effects__preview--chrome';\n\n    noUiSlider.create(sliderElement, {\n      range: {\n        min: CHROME.RANGE.MIN,\n        max: CHROME.RANGE.MAX,\n      },\n      start: CHROME.START,\n      step: CHROME.STEP,\n      connect: CHROME.CONNECT,\n    });\n    sliderElement.removeAttribute('disabled');\n\n    sliderElement.noUiSlider.on('update', (values) => {\n      sliderLevel.setAttribute('value', values[0]);\n      img.style.filter = `grayscale(${sliderLevel.value})`;\n    });\n  });\n\n  sepia.addEventListener('click', () => {\n    checkSliderExists();\n    img.className = 'effects__preview--sepia';\n\n    noUiSlider.create(sliderElement, {\n      range: {\n        min: SEPIA.RANGE.MIN,\n        max: SEPIA.RANGE.MAX,\n      },\n      start: SEPIA.START,\n      step: SEPIA.STEP,\n      connect: SEPIA.CONNECT,\n    });\n    sliderElement.removeAttribute('disabled');\n\n    sliderElement.noUiSlider.on('update', (values) => {\n      sliderLevel.setAttribute('value', values[0]);\n      img.style.filter = `sepia(${sliderLevel.value})`;\n    });\n\n  });\n\n  marvin.addEventListener('click', () => {\n    checkSliderExists();\n    img.className = 'effects__preview--marvin';\n\n    noUiSlider.create(sliderElement, {\n      range: {\n        min: MARVIN.RANGE.MIN,\n        max: MARVIN.RANGE.MAX,\n      },\n      start: MARVIN.START,\n      step: MARVIN.STEP,\n      connect: MARVIN.CONNECT,\n    });\n    sliderElement.removeAttribute('disabled');\n\n    sliderElement.noUiSlider.on('update', (values) => {\n      sliderLevel.setAttribute('value', values[0]);\n      img.style.filter = `invert(${sliderLevel.value}%)`;\n    });\n  });\n\n  phobos.addEventListener('click', () => {\n    checkSliderExists();\n    img.className = 'effects__preview--phobos';\n\n    noUiSlider.create(sliderElement, {\n      range: {\n        min: PHOBOS.RANGE.MIN,\n        max: PHOBOS.RANGE.MAX,\n      },\n      start: PHOBOS.START,\n      step: PHOBOS.STEP,\n      connect: PHOBOS.CONNECT,\n    });\n    sliderElement.removeAttribute('disabled');\n\n    sliderElement.noUiSlider.on('update', (values) => {\n      sliderLevel.setAttribute('value', values[0]);\n      img.style.filter = `blur(${sliderLevel.value}px)`;\n    });\n  });\n\n  heat.addEventListener('click', () => {\n    checkSliderExists();\n    img.className = 'effects__preview--heat';\n\n    noUiSlider.create(sliderElement, {\n      range: {\n        min: HEAT.RANGE.MIN,\n        max: HEAT.RANGE.MAX,\n      },\n      start: HEAT.START,\n      step: HEAT.STEP,\n      connect: HEAT.CONNECT,\n    });\n    sliderElement.removeAttribute('disabled');\n\n    sliderElement.noUiSlider.on('update', (values) => {\n      sliderLevel.setAttribute('value', values[0]);\n      img.style.filter = `brightness(${sliderLevel.value})`;\n    });\n  });\n\n  none.addEventListener('click', () => {\n    unsetEffectControl()\n  });\n};\n\nexport { setEffectContol, unsetEffectControl };\n","const ALERT_SHOW_TIME = 5000;\n\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, ALERT_SHOW_TIME);\n}\n\nconst isEscape = (evt) => {\n  return evt.key === ('Escape');\n}\n\nexport { showAlert, isEscape };\n","import { isEscape } from './util.js';\n\nconst MIN_COMMENTS_COUNT = 5;\n\nlet displayCommentsCount = MIN_COMMENTS_COUNT;\n\nconst body = document.body;\nconst smallPicturesContainer = document.querySelector('.pictures');\nconst bigPictureContainer = document.querySelector('.big-picture');\nconst commentCounter = bigPictureContainer.querySelector('.social__comment-count');\nconst commentsLoader = bigPictureContainer.querySelector('.comments-loader');\nconst closeButton = bigPictureContainer.querySelector('.big-picture__cancel')\nconst commentContainer = bigPictureContainer.querySelector('.social__comments');\nconst commentTemplate = document.querySelector('#comment')\n  .content\n  .querySelector('.social__comment');\n\nconst commentsFragment = document.createDocumentFragment();\n\nconst clearComments = () => {\n  const renderedComments = bigPictureContainer.querySelectorAll('.social__comment');\n  renderedComments.forEach((el) => {\n    commentContainer.removeChild(el);\n  });\n}\n\nconst showCommentsCounter = (obj) => {\n  if (obj.comments.length > 0) {\n    commentCounter.innerHTML = `${commentContainer.children.length} из <span class=\"comments-count\">${obj.comments.length}</span> комментариев`;\n  }\n}\n\nconst renderComments = (obj) => {\n  obj.comments\n    .slice(0, displayCommentsCount)\n    .forEach(({ avatar, message, name }) => {\n      const newComment = commentTemplate.cloneNode(true);\n      newComment.querySelector('.social__picture').src = avatar;\n      newComment.querySelector('.social__picture').alt = name;\n      newComment.querySelector('.social__text').textContent = message;\n      commentsFragment.appendChild(newComment);\n    })\n  commentContainer.appendChild(commentsFragment);\n\n  showCommentsCounter(obj);\n}\n\n\nconst renderBigPicture = (data) => {\n  const smallPictures = smallPicturesContainer.querySelectorAll('a');\n\n  for (let i = 0; i < smallPictures.length; i++) {\n\n    const onCloseButtonClick = () => {\n      bigPictureContainer.classList.add('hidden');\n      body.classList.remove('modal-open');\n      commentContainer.textContent = '';\n      displayCommentsCount = MIN_COMMENTS_COUNT;\n      commentsLoader.removeEventListener('click', onCommentsLoaderClick);\n      document.removeEventListener('keydown', onBodyEscKeydown)\n    }\n\n    const closeBigPicture = onCloseButtonClick;\n\n    const onBodyEscKeydown = (evt) => {\n      if (isEscape(evt)) {\n        closeBigPicture();\n      }\n    }\n\n    const addComments = (obj) => {\n      clearComments();\n      displayCommentsCount += MIN_COMMENTS_COUNT;\n      renderComments(obj);\n      showCommentsLoader(obj);\n    }\n\n    const onCommentsLoaderClick = () => addComments(data[i]);\n\n    const showCommentsLoader = (obj) => {\n      if (displayCommentsCount > obj.comments.length) {\n        commentsLoader.classList.add('hidden');\n        commentsLoader.removeEventListener('click', onCommentsLoaderClick);\n      } else {\n        commentsLoader.classList.remove('hidden');\n        commentsLoader.addEventListener('click', onCommentsLoaderClick);\n      }\n    }\n\n    smallPictures[i].addEventListener('click', () => {\n      bigPictureContainer.classList.remove('hidden');\n\n      bigPictureContainer.querySelector('.big-picture__img img').src = data[i].url;\n      bigPictureContainer.querySelector('.big-picture__img img').alt = data[i].description;\n      bigPictureContainer.querySelector('.likes-count').textContent = data[i].likes;\n      bigPictureContainer.querySelector('.comments-count').textContent = data[i].comments.length;\n      bigPictureContainer.querySelector('.social__caption').textContent = data[i].description;\n\n      renderComments(data[i]);\n      showCommentsLoader(data[i]);\n\n      body.classList.add('modal-open');\n      closeButton.addEventListener('click', onCloseButtonClick)\n      document.addEventListener('keydown', onBodyEscKeydown)\n    })\n  }\n}\n\nexport { renderBigPicture };\n","import { renderBigPicture } from './render-big-picture.js';\n\nconst picturesContainer = document.querySelector('.pictures');\n\nconst pictureTemplate = document.querySelector('#picture')\n  .content\n  .querySelector('.picture');\nconst pictureMiniaturesFragment = document.createDocumentFragment();\n\nconst clearPictures = () => {\n  const pictures = picturesContainer.querySelectorAll('.picture');\n  pictures.forEach((el) => {\n    picturesContainer.removeChild(el);\n  })\n}\n\nconst renderPictures = (data) => {\n  data.forEach(({ url, likes, comments }) => {\n    const pictureMiniature = pictureTemplate.cloneNode(true);\n    pictureMiniature.querySelector('.picture__img').src = url;\n    pictureMiniature.querySelector('.picture__likes').textContent = likes;\n    pictureMiniature.querySelector('.picture__comments').textContent = comments.length;\n    pictureMiniaturesFragment.appendChild(pictureMiniature);\n  });\n  picturesContainer.appendChild(pictureMiniaturesFragment);\n\n  renderBigPicture(data);\n}\n\nexport { renderPictures, clearPictures };\n\n","/* global _:readonly */\nimport { renderPictures, clearPictures } from './render.js';\n\nconst RANDOM_PHOTO_COUNT = 10;\nconst RENDER_DELAY = 500;\n\nconst filterContainer = document.querySelector('.img-filters');\nconst filterDefault = filterContainer.querySelector('#filter-default');\nconst filterRandom = filterContainer.querySelector('#filter-random');\nconst filterDiscussed = filterContainer.querySelector('#filter-discussed');\n\nconst createFilter = () => {\n  filterContainer.classList.remove('img-filters--inactive');\n\n  filterDefault.addEventListener('click', () => {\n    filterDefault.classList.add('img-filters__button--active');\n    filterRandom.classList.remove('img-filters__button--active');\n    filterDiscussed.classList.remove('img-filters__button--active');\n  });\n\n  filterRandom.addEventListener('click', () => {\n\n    filterRandom.classList.add('img-filters__button--active');\n    filterDefault.classList.remove('img-filters__button--active');\n    filterDiscussed.classList.remove('img-filters__button--active');\n  });\n\n  filterDiscussed.addEventListener('click', () => {\n    filterDiscussed.classList.add('img-filters__button--active');\n    filterDefault.classList.remove('img-filters__button--active');\n    filterRandom.classList.remove('img-filters__button--active');\n\n  });\n}\n\nconst getFilterPictures = (data) => {\n  if (filterRandom.classList.contains('img-filters__button--active')) {\n    clearPictures();\n    renderPictures(data\n      .slice()\n      .sort(() => 0.5 - Math.random())\n      .slice(0, RANDOM_PHOTO_COUNT));\n  } else if (filterDiscussed.classList.contains('img-filters__button--active')) {\n    clearPictures();\n    renderPictures(data.slice().sort((a, b) => b.comments.length - a.comments.length));\n  } else {\n    clearPictures();\n    renderPictures(data);\n  }\n}\n\nconst setFilter = (data) => {\n  filterContainer.addEventListener('click', _.debounce(() => getFilterPictures(data), RENDER_DELAY));\n}\n\nexport { createFilter, setFilter };\n","import { isEscape } from './util.js';\n\nconst main = document.querySelector('main');\n\nconst successMessage = document.querySelector('#success')\n  .content\n  .querySelector('.success')\n  .cloneNode(true);\nconst successMessageCloseButton = successMessage.querySelector('.success__button');\n\nconst errorMessage = document.querySelector('#error')\n  .content\n  .querySelector('.error')\n  .cloneNode(true);\nconst errorMessageCloseButton = errorMessage.querySelector('.error__button');\n\nconst closeSuccessModal = () => {\n  main.removeChild(successMessage);\n  document.removeEventListener('click', onSuccessDocumentClick);\n  document.removeEventListener('keydown', onSuccessDocumentEscKeydown);\n}\n\nconst closeErrorModal = () => {\n  main.removeChild(errorMessage);\n  document.removeEventListener('click', onErrorDocumentClick);\n  document.removeEventListener('keydown', onErrorDocumentEscKeydown);\n}\n\nconst onSuccessDocumentEscKeydown = (evt) => {\n  if (isEscape(evt)) {\n    closeSuccessModal();\n  }\n}\nconst onErrorDocumentEscKeydown = (evt) => {\n  if (isEscape(evt)) {\n    closeErrorModal();\n  }\n}\nconst onSuccessDocumentClick = (evt) => {\n  if (evt.target.className === 'success') {\n    closeSuccessModal();\n  }\n}\n\nconst onErrorDocumentClick = (evt) => {\n  if (evt.target.className === 'error') {\n    closeErrorModal();\n  }\n}\n\nconst onSuccessMessageCloseButtonClick = closeSuccessModal;\n\nconst showSuccessModal = () => {\n  main.appendChild(successMessage);\n  successMessageCloseButton.addEventListener('click', onSuccessMessageCloseButtonClick);\n  document.addEventListener('keydown', onSuccessDocumentEscKeydown);\n  document.addEventListener('click', onSuccessDocumentClick);\n}\n\nconst onErrorMessageCloseButtonClick = closeErrorModal;\n\nconst showErrorModal = () => {\n  main.appendChild(errorMessage);\n  errorMessageCloseButton.addEventListener('click', onErrorMessageCloseButtonClick);\n  document.addEventListener('keydown', onErrorDocumentEscKeydown);\n  document.addEventListener('click', onErrorDocumentClick);\n}\n\nexport { showSuccessModal, showErrorModal };\n","const MAX_HASHTAGS_COUNT = 5;\nconst MAX_HASHTAG_LENGTH = 20;\nconst HASHTAG_PATTERN = /^#[А-яёA-z0-9]+$/i;\nconst WARNINGS = {\n  equal: 'Oдинаковые хэш-теги недопустимы',\n  amout: 'Хэш-тегов не должно быть больше пяти',\n  limit: 'Хэш-тег не может быть больше 20-ти символов',\n  pattern: 'Недопустимые знаки',\n};\nconst WARNING_COLOR = '#ff4040';\n\nconst description = document.querySelector('.text__description');\nconst hashtag = document.querySelector('.text__hashtags');\n\nconst onDescriptionInvalid = () => {\n  if (description.validity.tooLong) {\n    description.setCustomValidity('Комментарий должен быть не более 140 символов');\n    description.style.border = WARNING_COLOR + ' solid 3px';\n    description.style.color = WARNING_COLOR;\n  } else {\n    description.setCustomValidity('');\n    description.style.borderColor = '';\n    description.style.color = '';\n  }\n\n  description.reportValidity();\n};\n\nconst onHastagInput = () => {\n  const errors = [];\n  const hashtags = hashtag.value.trim().toLowerCase().split(' ');\n\n  hashtags.forEach((el, i) => {\n    if (!HASHTAG_PATTERN.test(el) && el !== '' && el !== '#') {\n      errors.push(WARNINGS.pattern);\n    }\n    if (el.length > MAX_HASHTAG_LENGTH) {\n      errors.push(WARNINGS.limit);\n    }\n\n    for (let j = 1; j < hashtags.length; j++) {\n      if (hashtags[i] === hashtags[j] && i !== j) {\n        if (!errors.includes(WARNINGS.equal)) {\n          errors.push(WARNINGS.equal);\n        }\n      }\n    }\n  });\n\n  if (hashtags.length > MAX_HASHTAGS_COUNT) {\n    errors.push(WARNINGS.amout);\n  }\n\n  hashtag.setCustomValidity(errors.join('. '));\n  hashtag.reportValidity();\n\n  if (errors.length) {\n    hashtag.style.border = WARNING_COLOR + ' solid 3px';\n    hashtag.style.color = WARNING_COLOR;\n  } else {\n    hashtag.style.borderColor = '';\n    hashtag.style.color = '';\n  }\n};\n\nconst onEscKeydown = (evt) => {\n  evt.stopPropagation();\n}\n\nconst setValidationForm = () => {\n  description.addEventListener('invalid', onDescriptionInvalid)\n  hashtag.addEventListener('input', onHastagInput);\n\n  hashtag.addEventListener('keydown', onEscKeydown);\n  description.addEventListener('keydown', onEscKeydown);\n}\n\nconst unsetValidationForm = () => {\n  description.removeEventListener('invalid', onDescriptionInvalid);\n  hashtag.removeEventListener('input', onHastagInput);\n\n  hashtag.removeEventListener('keydown', onEscKeydown);\n  description.removeEventListener('keydown', onEscKeydown);\n}\n\nexport { setValidationForm, unsetValidationForm };\n","import { img, setScaleControl, unsetScaleControl } from './scale-control.js'\nimport { setEffectContol, unsetEffectControl } from './effect-control.js'\nimport { sendData } from './api.js';\nimport { showSuccessModal, showErrorModal } from './upload-message.js';\nimport { setValidationForm, unsetValidationForm } from './validation.js';\nimport { isEscape } from './util.js';\n\nconst FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst uploadForm = document.querySelector('.img-upload__form');\nconst uploadInput = uploadForm.querySelector('.img-upload__input');\nconst uploadOverlay = uploadForm.querySelector('.img-upload__overlay');\nconst uploadCancel = uploadOverlay.querySelector('.img-upload__cancel');\nconst body = document.querySelector('body');\nconst effectPreviews = uploadForm.querySelectorAll('.effects__preview')\n\nconst insertPhoto = () => {\n  const file = uploadInput.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      img.src = reader.result;\n      effectPreviews.forEach((preview) => {\n        preview.style.backgroundImage = `url(${reader.result})`;\n      });\n    });\n    reader.readAsDataURL(file);\n  }\n}\n\nconst closeModal = () => {\n  uploadOverlay.classList.add('hidden');\n  body.classList.remove('.modal-open');\n  uploadForm.reset();\n  uploadForm.removeEventListener('submit', onUploadFormSubmit);\n  document.removeEventListener('keydown', onDocumentKeydown);\n}\n\nconst onUploadFormSubmit = (evt) => {\n  evt.preventDefault();\n\n  sendData(\n    () => showSuccessModal(),\n    () => showErrorModal(),\n    new FormData(evt.target),\n  );\n  closeModal();\n  unsetScaleControl();\n  unsetEffectControl();\n}\n\nconst onDocumentKeydown = (evt) => {\n  if (isEscape(evt)) {\n    closeModal();\n    unsetScaleControl();\n    unsetEffectControl();\n    unsetValidationForm();\n  }\n}\n\nconst onUploadCancelClick = () => {\n  closeModal();\n  unsetScaleControl();\n  unsetEffectControl();\n  unsetValidationForm();\n}\n\nuploadInput.addEventListener('change', () => {\n  insertPhoto();\n  uploadForm.addEventListener('submit', onUploadFormSubmit);\n  uploadOverlay.classList.remove('hidden');\n  body.classList.add('modal-open');\n  uploadCancel.addEventListener('click', onUploadCancelClick);\n  document.addEventListener('keydown', onDocumentKeydown);\n\n  setScaleControl();\n  setEffectContol();\n  setValidationForm();\n});\n","import { renderPictures } from './render.js'\nimport { showAlert } from './util.js';\nimport { createFilter, setFilter } from './filter.js';\n\nconst FETCH_GET_URL = 'https://23.javascript.pages.academy/kekstagram/data';\nconst FETCH_POST_URL = 'https://23.javascript.pages.academy/kekstagram';\n\nconst getPostsFeed = () => {\n  return fetch(FETCH_GET_URL)\n    .then((response) => response.json())\n    .then((data) => {\n      renderPictures(data);\n      createFilter(data);\n      setFilter(data);\n    })\n    .catch(() => {\n      showAlert('Ошибка загрузки изображений');\n    });\n};\n\nconst sendData = (onSuccess, onFail, body) => {\n  fetch(\n    FETCH_POST_URL,\n    {\n      method: 'POST',\n      body,\n    },\n  )\n    .then(() => {\n      onSuccess();\n    })\n    .catch(() => {\n      onFail();\n    });\n\n}\n\nexport { getPostsFeed, sendData };\n"],"sourceRoot":""}